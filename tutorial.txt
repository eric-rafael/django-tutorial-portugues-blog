

MODELS.PY
{
    -> Cada classe √© uma tabela.
    -> Cada vari√°vel √© um campo.
    -> Cada uso da v√°ri√°vel na execu√ß√£o √© um registro.
}

{
        from django.contrib.auth.models import User
        from django.db import models
        from django.urls import reverse


        class Post(models.Model):
        title = models.CharField(max_length=255)
        slug = models.SlugField(max_length=255, unique=True)
        author = models.ForeignKey(User, on_delete=models.CASCADE)
        body = models.TextField()
        created = models.DateTimeField(auto_now_add=True)
        updated = models.DateTimeField(auto_now=True)

        class Meta:
                ordering = ("-created",)
                 ->>> mostra em post_list o artigos ordenados pelo tempo
                      de cria√ß√£o.

        def __str__(self):
                return self.title
                        ->>> muda o titulo do post na pagina admin para o titulo registrado
                        na cria√ß√£o do blog.

        def get_absolute_url(self):
                return reverse("blog:detail", kwargs={"slug": self.slug})
                        ->>> Define em um unico lugar a url de um recurso
                        ->>> blog: app name
                             detail: nome da url > definido no URLS.PY
                             kwargs: manda o argumento "slug" pasando o
                             slug do post (self.slug). M√©todo que define
                             a url de um recurso (nesse caso do post).
                        
                        

}


ADMIN.PY
{
    @admin.register(Post)
            ->>> registra o modelo para ele aparecer na interface.

    class PostAdmin(admin.ModelAdmin):
            ->>> PostAdmin: editando ele pode criar p√°gina de busca, reordenar, etc.

        list_display = ("title", "slug", "author", "created", "updated")
                ->>> exibe os nomes dos campos em cada post criado na p√°gina do admin.

        prepopulated_fields = {"slug": ("title",)}
                ->>> conforme escreve o titulo do post ele preenche o slug no campo
                     (slug = models.SlugField) localizado em MODELS.PY    <<<-.
}

VIEWS.PY
{
    -> Fun√ß√µes do pyhton que recebem um REQUEST(uma solicita√ß√£o web) e retorna um
    RESPONSE(uma resposta, por ex: um html, JSON, arquivos no geral, etc).
    -> Podemos criar VIEWS usando fun√ß√µes e usando classes.
    -> Aqui criadas em classes (usando VIEWS gen√©ricas) etc.
    -> Site que descreve as VIEWS: https://ccbv.co.uk/.
    -> VIEWS definem quais dados v√£o ser mostrados pro usu√°rio.
    -> 
}
{
    from django.views.generic import DetailView, ListView
            ->>> ListView: lista v√°rios posts.
                 DetailView: mostra apenas um post.
            ->>> Para usa-las a gente cria nossas classes e 
                 essas nossas classes herdam ListView e DetailView
                 e as nossas classes s√£o subclasses de ListView e DetailView.
    
    from .models import Post
    
    class PostListView(ListView):
            ->>> PostListView √© uma subclasse de ListView
        
        model = Post
            
    class PostDetailView(DetailView):
            ->>> PostDetailView √© uma subclasses de DetailView
        
        model = Post

}

URLS.PY
{
    from django.urls import path
            ->>> Importado "path" que ser√° usado em urlpatterns

    from . import views



->>> Nesse arquivo estamos definindo duas vari√°veis "app_name" e "urlpatterns"

    app_name = "blog"
            ->>> "app_name" referencia as urls do arquivo "blog".


    urlpatterns = [
            ->>> "urlpatterns" √© uma lista de padr√µes url

        path("", views.PostListView.as_view(), name="list"),
                ->>> estamos conectando a url sem argumentos ("")
                com a view ("PostListView")
                ->>> quando acessamos a url sem argumentos vamos cair 
                na lista de posts 

        path("<slug:slug>/", views.PostDetailView.as_view(), name="detail"),
                ->>> estamos conectando a url que tem slug
                como argumento ("<slug:slug>/") com a
                view ("PostDetailView")
                ->>> quando acessamos a url passando um slug de um post
                como argumento vamos acessar a p√°gina desse post.

->>> o m√©todo (as_view()) tem que ser chamado toda a vez que trabalhar com 
     VIEWS baseadas em classes. Assim obtemos um column que vai receber a REQUEST
->>> (name="") s√£o os nomes das urls. os nomes que usandos para referencias esses
     padr√µes (cada item da lista "urlpatterns" √© um desses padr√µes) Assim
     evito conflitos se houver outra url com o nome list e com o nome detail.
     
    ]
}

main/ URLS.PY
{
        from django.contrib import admin
        from django.urls import include, path


        urlpatterns = [
        path("admin/", admin.site.urls),
        path("blog/", include("blog.urls", namespace="blog")),
                ->>> inclui a url.py do app na url.py do projeto
->>> Quando eu acessar (/blog) (isso seria um url sem argumentos)
     recebo a lista de posts. 
     Quando eu acessar (/blog/slug do artigo) (isso seria um url com argumentos)
     recebo a p√°gina do post desse slug.
->>> Se escrevesse path("", inclu...etc) daria para por uma pagina na raiz

]

}

TEMPLATES
{
        -> definimos como os dados v√£o ser apresentados pro usu√°rio
        -> 
}

base.html
{
        -> recebe o conte√∫do que √© inserido por post_detail.html e post_list.html
}
{
        {% load static %}
         ->>> para usar css.
        <!DOCTYPE html>

        <html>

        <head>
                <title>{% block title %}{% endblock %}</title>
                <link href="{% static 'css/blog.css' %}" rel="stylesheet">
                 ->>> para usar css.
        </head>

        <body>
                        ->>> Conte√∫do no nosso site. 
        <header>
                <h1>Fabio Ruicci</h1>
        </header>

        <main>
                {% block content %}
                {% endblock %}
        </main>
        </body>

        </html>        
}

post_list.html
{
        -> possui os dados a ser inseridos na base da p√°gina do usu√°rio.
}
{
        {% extends "blog/base.html" %}
                ->>> post_list.html herda o conte√∫do de base.html

        {% block title %}Meu Blog üêç{% endblock %}

        {% block content %}
                {% for post in post_list %}
                        ->>> usa informa√ß√µes da views.py
                        ->>> la√ßo FOR
                        <article>

->>> <article></article> por causa do la√ßo FOR se repete na p√°gina do 
     usu√°rio dependendo de quantos posts tem armazenados no banco de dados 
->>> Para acessar esses atributos usamos duas chaves {{}} sem simbolo de porcentagem %
                                
                                <h2>
                                        <a href="{{ post.get_absolute_url }}">
                                         ->>> funciona apenas com arguemnto self.
                                        {{ post.title }}
                                        </a>
                                </h2>
                                <p class="date">
                                        Publicado em {{ post.created }} por {{ post.author }}
                                </p>
                                {{ post.body|linebreaks|truncatewords:10 }}
                                   ->>> mostra as 10 primeiras palavras do artigo
                                   ->>> post.body √© o corpo do post
                                        e nele √© aplicado:
                                        linebreaks √© um filter: substitui as quebras
                                         de linhas por html.
                                        truncatewords √© um filter: apresenta um 
                                         determinado numero de linhas, nesse caso 10.
                                        com o pipe | podemos usar os filtros um atras
                                        do outro.

                                </article>
                {% endfor %}            
        {% endblock %}

}
post_detail.html
{
->>> Recebe a vari√°vel Post

        {% extends "blog/base.html" %}

        {% block title %}
                {{ post.title }}
        {% endblock %}

        {% block content %}
                <h2>{{ post.title }}</h2>
                <p class="date">
                        Publicado em {{ post.created }} por {{ post.author }}
                </p>
        {{ post.body|linebreaks }}
        {% endblock %}

}

static\css\ BLOG.CSS
{
        body {
        margin: 0 25%;
        font-family: sans-serif;
        font-size: 1.5rem;
        color: #111111;
        }

        h1 {
        text-align: center;
        font-family: serif;
        font-weight: normal;
        border-bottom: 1px solid;
        }

        h2 {
        color: #0072aa;
        font-weight: normal;
        margin-bottom: 1px;
        }

        a {
        color:#0072aa;
        text-decoration:none;
        }

        p.date {
        font-size: 0.8rem;
        font-style: italic;
        margin-top: 1px;
        }

}













